<p>{{ form.value | json}}</p>
<p>{{ calculatorForm | json}}</p>

<form [formGroup]="form">
  <!-- География начало -->
  <div class="row">
    <div class="col-sm-5">
      <div class="form-group">
        <label for="geography" 
          data-toggle="tooltip"   
          data-placement="right" 
          title="Tooltip on right">
          <h2>География</h2>
        </label>
        <select 
          formControlName="city"
          id="inputCity" 
          class="form-control"       
          (change)="onCityChange()">
          <option value="">Выберите город из списка ...</option>
          <option 
            *ngFor="let c of cities" 
            value="{{ c.id }}"> {{ c.cityName}}
          </option>
        </select>
        <!-- <div  class="alert alert-danger">Выберите город</div> -->
        <!-- Предупреждение в случае ошибки заполнения данных -->
        <div *ngIf="city.touched && city.invalid" 
          class="alert alert-danger alert-dismissible fade show" 
          role="alert">
          <strong>Ошибка заполнения данных!</strong> Выберите город.
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      </div>      
    </div>
    <!-- <button type="submit" class="btn btn-primary">Submit</button> -->
  </div>
  <!-- География конец -->

  <!-- Виды зданий  начало -->
  <div class="row">
    <div class="col-sm-5">
      <div class="form-group">        
        <h2>Здания</h2> 
          <div 
            class="btn-group btn-group-toggle" 
            data-toggle="buttons">            
              <label 
                class="btn btn-secondary"
                *ngFor="let kind of buildingKinds"
                (click)="buildingKindSelect(kind.id)">
                <input 
                  formControlName="buildingKind" 
                  type="radio" 
                  name="buildingKind"
                  id= "{{ kind.id }}" 
                  autocomplete="off"                                                         
                  > {{ kind.buildingKindName }}
              </label>   
          </div> 
      </div>
    </div>
  </div>
  <!-- Виды зданий конец -->

  <!-- Типы зданий начало -->
  <div *ngIf="selectedBuildingKind !== 0">
    <div class="row">
      <div class="col-sm-5">
        <div 
          class="form-check"
          *ngFor="let type of buildingTypes; let i=index">
          <input 
            formControlName="buildingType"
            class="form-check-input" 
            type="radio" 
            name="buildingType" 
            id="typeRadio {{ type.id }}" 
            value="type.id"            
            (change)="onBuildTypeChange(type.id, i)"
            [checked]="isCheckedBuildType(i)">
          <label 
            class="form-check-label" 
            for="typeRadio {{ type.id }}">
            {{ type.name }}
          </label>
        </div>
        <div 
          *ngIf="buildType.touched && buildType.invalid" 
          class="alert alert-danger alert-dismissible fade show" 
          role="alert">
          <strong>Ошибка заполнения данных!</strong> Выберите вид здания.
          <button 
            type="button" 
            class="close" 
            data-dismiss="alert" 
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>  
      </div>
    </div>
  </div>
  <!-- Типы зданий конец -->

  <!-- Добавить помещение начало -->
  <div>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#roomAdd">
      Добавить
    </button>

    <!-- Modal -->
    <div 
      class="modal fade" 
      id="roomAdd" 
      tabindex="-1" 
      role="dialog" 
      aria-labelledby="roomAddTitle" 
      aria-hidden="true">
      <div 
        class="modal-dialog modal-dialog-centered" 
        role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" 
              id="exampleModalLongTitle">
              Добавить помещение
            </h5>
            <button 
              type="button" 
              class="close" 
              data-dismiss="modal" 
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div formGroupName="room">
            <div class="modal-body">
              <div class="form-group">
                <label for="inputRoomNumber">№ помещения</label>
                <input 
                  formControlName="roomNumber"
                  type="number" 
                  min="0"
                  class="form-control" 
                  id="inputRoomNumber" 
                  placeholder="0">
              </div>
            </div>
            <div class="modal-body">        
              <div class="form-group">
                <label for="roomSelect">Помещение</label>
                <select 
                  formControlName="roomName"
                  class="form-control" 
                  id="roomSelect">
                  <option value="1">Выберите помещение ...</option>
                  <option value="2">Тепловой пункт</option>
                  <option value="3">Насосная масла</option>
                  <option value="4">Техническое помещение</option>
                  <option value="5">Станция газового пожарaтоушения</option>
                </select>
              </div>            
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="inputSquare">Площадь, м2</label>
                <input 
                formControlName="roomArea"
                  type="number" 
                  step="10"
                  min="0"
                  class="form-control" 
                  id="inputSquare" 
                  placeholder="0">
              </div>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="inputSquare">Высота, мм</label>
                <input 
                  formControlName="roomHeight"
                  type="number" 
                  step="10"
                  min="0"
                  class="form-control" 
                  id="inputSquare" 
                  placeholder="0">
              </div>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="inputSquare">Этаж</label>
                <input 
                  formControlName="roomFloor"
                  type="number"               
                  class="form-control" 
                  id="inputSquare" 
                  placeholder="0">
              </div>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="inputSquare">Кол-во людей</label>
                <input 
                  formControlName="roomPeopleAmount"
                  type="number"    
                  min="0"           
                  class="form-control" 
                  id="inputSquare" 
                  placeholder="0">
              </div>
            </div>
            <div class="modal-footer">
              <button 
                type="button" 
                class="btn btn-secondary" 
                data-dismiss="modal">
                Отмена
              </button>
              <button 
                type="button" 
                data-dismiss="modal"
                (click)="onSaveRoomClick()"
                class="btn btn-primary">                            
                Сохранить
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Добавить помещение конец -->

</form>
