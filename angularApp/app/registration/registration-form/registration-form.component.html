<form [formGroup]="form">

  <div class="row user-section">
    <div class="col-sm-5">
      <div formGroupName="user">

        <div class="form-group">
          <label for="exampleInputEmail1">Адрес email</label>
          <input 
            formControlName="email"
            type="email" 
            class="form-control" 
            id="inputEmail"             
            aria-describedby="emailHelp" 
            placeholder="Укажите ваш email">
          <small 
            id="emailHelp" 
            class="form-text text-muted">
            Мы никогда не раскроем вашего почтового адреса, он будет использоваться для авторизации на сайте.
          </small>
          <div 
            *ngIf="email.touched && email.invalid" 
            class="alert alert-danger alert-dismissible fade show" 
            role="alert">
            <strong>Ошибка.</strong>Email введен неверно.
          </div>
        </div>

        <div class="form-group">
          <label for="inputLastName">Фамилия</label>
          <input
            formControlName="lastName"
            type="text" 
            class="form-control" 
            id="inputLastName" 
            aria-describedby="lastNameHelp" 
            placeholder="Укажите вашу фамилию (необязательно)">
        </div>
        <div 
          *ngIf="lastName.touched && lastName.invalid" 
          class="alert alert-danger alert-dismissible fade show" 
          role="alert">
          <strong>Ошибка.</strong>Фамиилия может содержать только буквы киррилицы.
      </div>

      <div class="form-group">
        <label for="inputFirstName">Имя</label>
        <input
          formControlName="firstName"
          type="text" 
          class="form-control" 
          id="inputFirstName" 
          aria-describedby="firstNameHelp" 
          placeholder="Укажите вашe имя (необязательно)">
      </div>
      <div 
        *ngIf="firstName.touched && firstName.invalid" 
        class="alert alert-danger alert-dismissible fade show" 
        role="alert">
        <strong>Ошибка.</strong>Имя может содержать только буквы киррилицы.
      </div>

      <div class="form-group">
        <label for="inputMiddleName">Отчество</label>
        <input
          formControlName="middleName"
          type="text" 
          class="form-control" 
          id="inputMiddleName" 
          aria-describedby="middleNameHelp" 
          placeholder="Укажите вашe отчество (необязательно)">
      </div>
      <div 
        *ngIf="middleName.touched && middleName.invalid" 
        class="alert alert-danger alert-dismissible fade show" 
        role="alert">
        <strong>Ошибка.</strong>Отчество может содержать только буквы киррилицы.
      </div>

      </div>
    </div>
  </div>
  
  <div class="row user-section">
      <div class="col-sm-5">
        <div formGroupName="passwordForm">

          <div class="form-group">
            <label for="inputPassword">Пароль</label>
            <input
              formControlName="password"
              type="password" 
              class="form-control" 
              id="inputPassword" 
              aria-describedby="passwordHelp" 
              placeholder="Укажите ваш пароль">
          </div>
          <div 
            *ngIf="password.touched && password.invalid" 
            class="alert alert-danger alert-dismissible fade show" 
            role="alert">
            <strong>Ошибка.</strong>Пароль должен быть длиной не менее 6 символов и иметь хотя бы один не повторяющийся.
          </div>

          <div class="form-group">
              <label for="inputRepeatPassword">Подтверждение пароля</label>
              <input
                formControlName="repeatPassword"
                type="password" 
                class="form-control" 
                id="inputRepeatPassword" 
                aria-describedby="repeatPasswordHelp" 
                placeholder="Укажите ваш пароль еще раз">
            </div>
            <div 
              *ngIf="repeatPassword.touched && repeatPassword.invalid" 
              class="alert alert-danger alert-dismissible fade show" 
              role="alert">
              <strong>Ошибка.</strong>Пароль должен быть длиной не менее 6 символов и иметь хотя бы один не повторяющийся.
            </div>
            <div 
            *ngIf="repeatPassword.touched && form.controls.passwordForm.invalid" 
            class="alert alert-danger alert-dismissible fade show" 
            role="alert">
            <strong>Ошибка.</strong>Пароль не совпадает
          </div>

        </div>
      </div>
  </div>


  <div class="row col-sm-5 user-section">
    <div class="form-group">
      <button 
        class="btn btn-primary"
        [disabled]="!form.valid || isRequesting"
        (click)="onCreateUserClick()">
        Создать аккаунт
      </button>
      <spinner-form [isRunning]="isRequesting"></spinner-form>
    </div>
 
  </div>  
  <div 
    class="user-section alert alert-danger alert-dismissible fade show" 
    role="alert"
    *ngIf="errors.length > 0">
    <div 
      *ngFor="let error of errors; let i=index">
        {{errors[i].description}}
    </div>    
  </div> 

</form> 

